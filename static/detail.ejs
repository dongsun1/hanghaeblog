<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css"
    />
    <link rel="stylesheet" href="/reset.css" />
    <link rel="stylesheet" href="/posts.css" />
    <link rel="stylesheet" href="/detail.css" />
    <script
      src="https://code.jquery.com/jquery-3.5.1.js"
      integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc="
      crossorigin="anonymous"
    ></script>
    <script src="https://cdn.jsdelivr.net/npm/moment@2.29.1/moment.min.js"></script>
    <script src="/api.js"></script>
  </head>
  <body>
    <header>
      <h1 id="head" onclick="location.href='/'">Hanghae Blog</h1>
      <hr id="head_" />
    </header>
    <section>
      <header>
        <h2 id="secTitle"><%=detail.title%></h2>
        <div class="topRight">
          <div class="writer">작성자 : <%=detail.writer %></div>
          <div class="date">날짜 : <%=detail.date %></div>
        </div>
      </header>
      <hr />
      <article>
        <p class="desc"><%=detail.description%></p>
        <button class="btn btn-default" onclick="postUpdate('<%=detail._id%>')">
          수정
        </button>
      </article>
      <div id="commentList">
        <hr />
        <h1 id="commentTitle">댓글</h1>
        <% for (let i = 0; i < comment.length; i++) {%>
        <hr />
        <div class="commentTop">
          <div class="commentWriter"><%=comment[i].writer%>님</div>
          <div class="commentDate"><%=comment[i].date%></div>
        </div>
        <div class="commentBottom">
          <div class="commentDesc"><%=comment[i].description%></div>
        </div>
        <button
          class="btn btn-default commentDel"
          onclick="deleteComment('<%=comment[i]._id%>')"
        >
          삭제
        </button>
        <% } %>
      </div>
      <hr />
      <div id="commentForm">
        <div id="commentFormTop">
          <span class="commentWriter">이름</span>
          <input
            type="text"
            id="commentWriter"
            class="form-control"
            placeholder="이름을 입력해주세요."
          />
          <span class="commentPw">비밀번호</span>
          <input
            type="password"
            id="commentPw"
            class="form-control"
            placeholder="비밀번호를 입력해주세요."
          />
        </div>
        <div id="commentFormBottom">
          <input
            type="text"
            id="commentDesc"
            class="form-control"
            placeholder="댓글을 입력해주세요."
          />
          <button
            class="btn btn-default"
            id="createComment"
            onclick="createComments('<%=detail._id%>')"
          >
            작성
          </button>
        </div>
      </div>
    </section>
    <script>
      function postUpdate(id) {
        location.href = "/update/" + id;
      }
    </script>
  </body>
</html>
